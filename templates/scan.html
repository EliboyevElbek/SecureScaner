{% extends 'base.html' %}
{% load static %}

{% block title %}Domain Tahlil - SiteScaner{% endblock title %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/scan.css">
{% endblock extra_css %}

{% block content %}
<div class="container">
    <div class="header-section">
        <h1 class="main-title glitch">Domain Tahlil</h1>
        <p class="subtitle">Domainlarni kiritib, xavfsizlik tahlilini boshlang</p>
    </div>

    <div class="scan-container">
        <!-- Domain Input Section -->
        <div class="input-section card">
            {% csrf_token %}
            <h2>Domainlar</h2>
            <div class="form-group">
                <label for="domainsInput">Domain nomlarini kiriting (har qatorda bitta):</label>
                <textarea 
                    id="domainsInput" 
                    class="form-input" 
                    rows="5" 
                    placeholder="example.com&#10;test.com&#10;demo.org"
                >{% if existing_domains %}{{ existing_domains|join:"&#10;" }}{% endif %}</textarea>
            </div>
            <button class="btn btn-primary" onclick="prepareDomains()">Tayyorlash</button>
        </div>

        <!-- Domains List Section -->
        <div class="domains-section card" id="domainsSection" style="display: none;">
            <h2>Tayyorlangan Domainlar</h2>
            <div class="domains-list" id="domainsList">
                <!-- Domains will be populated here -->
            </div>
            <div class="scan-actions">
                <button class="btn btn-success btn-large" onclick="startScan()">Tahlilni boshlash</button>
                <button class="btn btn-secondary" onclick="resetDomains()">Qaytadan boshlash</button>
                <button class="btn btn-primary" onclick="addMoreDomains()">+ Domain qo'shish</button>
            </div>
        </div>

        <!-- Scan Progress Section -->
        <div class="progress-section card" id="progressSection" style="display: none;">
            <h2>Tahlil Jarayoni</h2>
            <div class="progress-container" id="progressContainer">
                <!-- Progress will be populated here -->
            </div>
        </div>

        <!-- Scan Results Section -->
        <div class="results-section card" id="resultsSection" style="display: none;">
            <h2>Tahlil Natijalari</h2>
            <div class="results-summary" id="resultsSummary">
                <!-- Summary will be populated here -->
            </div>
            
            <div class="results-list" id="resultsList">
                <!-- Results will be populated here -->
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block extra_js %}
<script src="/static/js/scan.js"></script>
{% endblock extra_js %}